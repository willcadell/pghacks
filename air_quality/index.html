<!DOCTYPE html>
<html>
<head>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB9vnyKt02oej-h9VgkI-NPfDy1IfF9cwI&sensor=false&libraries=visualization">
</script>

<script>
function initialize()
{
var mapProp = {
  center:new google.maps.LatLng(53.9000, -122.7667),
  zoom:11,
  overviewMapControl: true,
  dissipating: false,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };
var map=new google.maps.Map(document.getElementById("googleMap")
  ,mapProp);

var pr_gasplant  = new google.maps.LatLng(55.572304, -121.94365);
var pr_hasler    = new google.maps.LatLng(55.6056, -121.9722);
var pg_cbc       = new google.maps.LatLng(53.9033, -122.7036);
var pg_gladstone = new google.maps.LatLng(53.8592, -122.7633);
var pg_jail      = new google.maps.LatLng(53.9072, -122.7136);
var pg_marsulex  = new google.maps.LatLng(53.84182, -122.73358);
var pg_plaza400  = new google.maps.LatLng(53.9133, -122.7411);
var taylor_south = new google.maps.LatLng(56.1058, -120.6633);
var taylor_town  = new google.maps.LatLng(56.1506, -120.6861);

var heatmapData = [
  {location: pr_gasplant,  weight: 21.4},
  {location: pr_hasler,    weight: 0.3},
  {location: pg_cbc,       weight: 2.9},
  {location: pg_gladstone, weight: 1.1},
  {location: pg_jail,      weight: 3.9},
  {location: pg_marsulex,  weight: 0.8},
  {location: pg_plaza400,  weight: 3.1},
  {location: taylor_south, weight: 0.0},
  {location: taylor_town,  weight: 0.4},
];

  var heatmap = new google.maps.visualization.HeatmapLayer({
    data: heatmapData,
    radius: 32,
    maxIntensity: 5.0
  });
  heatmap.setMap(map);



  var marker = new google.maps.Marker({
      position: pr_gasplant,
      map: map,
      title: 'Spectra Gas - SO2'
  });

  var marker = new google.maps.Marker({
      position: pr_hasler,
      map: map,
      title: 'Hasler - SO2'
  });

  var marker = new google.maps.Marker({
      position: pg_cbc,
      map: map,
      title: 'CBC - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: pg_gladstone,
      map: map,
      title: 'Gladstone - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: pg_jail,
      map: map,
      title: 'Jail - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: pg_marsulex,
      map: map,
      title: 'Marsulex - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: pg_plaza400,
      map: map,
      title: 'Plaza 400 - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: taylor_south,
      map: map,
      title: 'South Taylor - SO2'
  });

  var marker2 = new google.maps.Marker({
      position: taylor_town,
      map: map,
      title: 'Taylor - SO2'
  });





google.maps.event.addListener(map, 'zoom_changed', function () {
			var foo = map.getZoom() - 6;
			foo = foo * foo;
			foo = foo;
          heatmap.setOptions({  radius: foo  });
      });

}


google.maps.event.addDomListener(window, 'load', initialize);

</script>
</head>


<body>
<div id="googleMap" style="position:absolute;left:0;top:0;width:100%;height:100%;"></div>

</body>
</html>